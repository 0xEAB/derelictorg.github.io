
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for the Derelict project, a collectiion of D bindings to C libraries commonly used in game development.">
      
      
        <link rel="canonical" href="http://derelictorg.github.io/building/windows/">
      
      
        <meta name="author" content="Mike Parker">
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.7.4">
    
    
      
        <title>Compiling on Windows - Derelict Documentation</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-769c285a91.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="http://derelictorg.github.io" title="Derelict Documentation" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Compiling and Linking
                </span>
              
            
            Compiling on Windows
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/DerelictOrg" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Derelict Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/DerelictOrg" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../bindings/" title="About Bindings" class="md-nav__link">
      About Bindings
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Compiling and Linking
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Compiling and Linking
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../with-dub/" title="With DUB Projects" class="md-nav__link">
      With DUB Projects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../without-dub/" title="With Non-DUB Projects" class="md-nav__link">
      With Non-DUB Projects
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Compiling on Windows
      </label>
    
    <a href="./" title="Compiling on Windows" class="md-nav__link md-nav__link--active">
      Compiling on Windows
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dmd" title="DMD" class="md-nav__link">
    DMD
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#coff" title="COFF" class="md-nav__link">
    COFF
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#omf" title="OMF" class="md-nav__link">
    OMF
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ldc" title="LDC" class="md-nav__link">
    LDC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gdc" title="GDC" class="md-nav__link">
    GDC
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Loading Shared Libraries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Loading Shared Libraries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../loading/loader/" title="The Derelict Loader" class="md-nav__link">
      The Derelict Loader
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../loading/failure/" title="Load Failures" class="md-nav__link">
      Load Failures
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Packages
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Packages
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/latest-versions/" title="Latest Versions" class="md-nav__link">
      Latest Versions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/ft/" title="DerelictFT" class="md-nav__link">
      DerelictFT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/gl3/" title="DerelictGL3" class="md-nav__link">
      DerelictGL3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/glfw3/" title="DerelictGLFW3" class="md-nav__link">
      DerelictGLFW3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/sdl2/" title="DerelictSDL2" class="md-nav__link">
      DerelictSDL2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../packages/sfml2/" title="DerelictSFML2" class="md-nav__link">
      DerelictSFML2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dmd" title="DMD" class="md-nav__link">
    DMD
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#coff" title="COFF" class="md-nav__link">
    COFF
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#omf" title="OMF" class="md-nav__link">
    OMF
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ldc" title="LDC" class="md-nav__link">
    LDC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gdc" title="GDC" class="md-nav__link">
    GDC
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/DerelictOrg/derelictorg.github.io/edit/mkdocs/docs/building\windows.md" title="Edit this page" class="md-icon md-content__icon">edit</a>
                
                
                  <h1>Compiling on Windows</h1>
                
                <p>On all of the systems D supports but one, developers can rely on a standard ecosystem of compiler toolchains, including linkers. The three major D compilers all use the system linker on those systems. The outlier is Windows. </p>
<p>When using any Derelict package as a dynamic binding, none of the information on this page applies. It only applies when using any static binding, whether it be one of the Derelict packages that supports such a configuration or a non-Derelict library. In other words, when developing D programs that have a link-time dependency with third-party libraries on Windows, a few prerequisites need to be understood.</p>
<p>Of the three main compilers, only DMD and LDC actively support Windows. GDC has not had a Windows release for some time (though that will likely change now that the compiler has been accepted into the GCC compiler suite). The following sections look at each compiler in turn.</p>
<p>Download links for all three compilers can be found at the <a href="https://dlang.org/download.html">dlang.org downloads page</a>.</p>
<h3 id="dmd">DMD<a class="headerlink" href="#dmd" title="Permanent link">&para;</a></h3>
<p>DMD is the reference D compiler, developed primarily by D creator and <a href="https://digitalmars.com/">Digital Mars</a> owner, <a href="http://walterbright.com/">Walter Bright</a>.</p>
<p>DMD is built on top of the same compiler backend as the Digital Mars C/C++ compiler, <a href="https://digitalmars.com/download/freecompiler.html">DMC</a>. It ships with <a href="http://www.digitalmars.com/ctg/optlink.html">OPTLINK</a>, an ancient linker that only knows how to link 32-bit executables composed of object files in the <a href="https://en.wikipedia.org/wiki/Relocatable_Object_Module_Format">OMF</a> format. When passing the <code>-m32</code> command line switch (the default for the 32-bit version of DMD, currently the only version distributed in binary form on Windows), DMD's object output will be in the OMF format and it will use the OPTLINK linker to create executables.</p>
<p>Thankfully, DMD also supports generating object files in the <a href="https://en.wikipedia.org/wiki/COFF">COFF</a> format and linking using the Microsoft linker. This is enabled via the <code>-m32mscoff</code> command line switch for 32-bit binaries, and <code>-m64</code> for 64-bit binaries.This requires the installation of either the Microsoft Build Tools and the Windows SDK, or a supported version of Visual Studio. If you do not already have any of these installed, the easiest thing to do is to install the latest Visual Studio <a href="https://www.visualstudio.com/downloads/">Visual Studio Community Edition</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Generally, you can expect Visual Studio versions 2012 and later to be supported, though sometimes new versions may temporarily break support in some way. For example, due to changes in the path structure in VS 2017, the DMD installer could not automatically identify it for a time, so it could not properly configure DMD. Paths can always be configured manually, but VS 2015 renamed the C runtime library, the kind of breakage that can only be fixed by the DMD developers. Any breakage is generally fixed within a DMD release or two. In the interim, the previous Visual Studio version should continue to work.</p>
</div>
<p>To reiterate, when using the dynamic binding configuration of a Derelict package, the DLL can be in any format and compiled with any Windows compiler. As long as 32-bit executables are loading 32-bit DLLs, and 64-bit executables are loading 64-bit DLLs, the object file format is irrelevant. It only applies when linking in a static binding configuration.</p>
<h4 id="coff">COFF<a class="headerlink" href="#coff" title="Permanent link">&para;</a></h4>
<p>Once the Microsoft linker and libraries are installed, DMD needs to be told where to find them. While it's possible to edit the DMD configuration file (<code>sc.ini</code> in the <code>dmd2\windows\bin</code> directory), it's much easier to let the DMD Windows installer handle it automatically (see <a href="https://dlang.org/blog/2017/10/25/dmd-windows-and-c/">this D Blog post</a> for more info). When everything is configured, any libraries that have a link-time dependency must be in the COFF format.</p>
<p>Effectively, this means that when using a Derelict package in a static binding configuration (where supported), you should always either choose binary packages compiled with Visual C++, or use Visual C++ to compile the library yourself. For example, to use the <a href="../../packages/sdl2">DerelictSDL2</a> static binding configuration, go to <a href="https://www.libsdl.org/download-2.0.php">libsdl.org</a> and download the appropriate SDL development libraries for Visual C++, e.g. <code>SDL-devel-2.0.5-VC.zip</code>.</p>
<h4 id="omf">OMF<a class="headerlink" href="#omf" title="Permanent link">&para;</a></h4>
<p>Why are you even thinking about compiling in OMF format? Just don't! But if you must, don't even bother to look for precompiled OMF binaries for any library to which Derelict binds. They may be out there somewhere, but you're better off either running an object converter on the COFF libraries or compiling them yourself with DMC. The former is the recommended approach, as few libraries have a build system that supports DMC out of the box.</p>
<p>The first thing to do is to head to the Digital Mars site to download the Extended Utility Package (<a href="https://digitalmars.com/eup.html">EUP</a>). This contains two tools that will do the job. When you are linking dynamically with a DLL import library, run the <code>coffimplib</code> utility on the COFF DLL (such as the <code>SDL2.dll</code> obtained in the VC development archive from the SDL downloads page). This will produce an import library in OMF format that will link with the COFF DLL. When linking statically, run <code>coff2omf</code> on the COFF static library or any COFF object files you need to link with. This will produce libraries or object files in the OMF format.</p>
<h3 id="ldc">LDC<a class="headerlink" href="#ldc" title="Permanent link">&para;</a></h3>
<p>Older LDC releases for Windows were built on top of <a href="https://mingw-w64.org/doku.php">mingw-w64</a>, but recent releases require the Microsoft tools and libraries. The same COFF instructions in the DMD section above apply here.</p>
<h3 id="gdc">GDC<a class="headerlink" href="#gdc" title="Permanent link">&para;</a></h3>
<p>There has not been a GDC release for Windows in some time. If there eventually is, it will assumedly be built on top of mingw-w64. In that case, only binaries compiled with mingw-w64, either downloaded in precompiled packages or compiled yourself, will be compatible. While the MinGW linker does support COFF, and can sometimes link with binaries compiled with Visual C++, there are often linker errors that need to be worked around. Best not to mix them. </p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../without-dub/" title="With Non-DUB Projects" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                With Non-DUB Projects
              </span>
            </div>
          </a>
        
        
          <a href="../../loading/loader/" title="The Derelict Loader" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                The Derelict Loader
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-c35428f87f.js"></script>
      
      
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>